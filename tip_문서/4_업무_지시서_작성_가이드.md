# 📋 GitHub Actions Workflow 정의 파일(YAML) 작성 가이드

GitHub Actions는 작업을 선언하기 위해 **YAML** 형식을 사용합니다. 텍스트 기반의 데이터 직렬화 양식인 YAML의 기본 문법과 자동화에 필요한 예약어들을 학습합니다.

---

## 🏛️ 워크플로우 구성 요소 (Structures)

### 1. 이벤트 트리거 (`on:`)
자동화가 시작되는 조건을 선언합니다.
- **Schedule**: 주기적 실행 (`cron` 표현식 활용)
- **Workflow Dispatch**: UI 상의 버튼 클릭을 통한 수동 실행
- **Push**: 특정 브랜치에 코드가 커밋되었을 때 실행

### 2. 가상 서버 및 실행 환경 (`jobs:`, `runs-on:`)
작업 이행을 위한 인프라를 선택합니다.
- 예: `runs-on: ubuntu-latest` (최신 Ubuntu 리눅스 서버 할당)

### 3. 단계별 로직 (`steps:`)
실제 수행할 명령어를 순차적으로 선언합니다.
- **Actions**: `uses` 키워드를 통해 이미 만들어진 범용 액션(코드 가져오기, 환경 설정 등)을 재사용합니다.
- **Run**: `run` 키워드 뒤에 직접적인 쉘 명령어(`pip install`, `python main.py`)를 입력합니다.

---

## 🚀 워크플로우 템플릿 (Standard Template)

파일명: `.github/workflows/main_collector.yml`

```yaml
name: 데이터 수집 수명 주기 관리

on:
  schedule:
    - cron: '0 0 * * *'        # 매일 KST 09:00 자동 실행
  workflow_dispatch:           # 수동 실행 단추 활성화

jobs:
  execution_job:
    runs-on: ubuntu-latest    # 가상 머신 환경 정의
    steps:
      - uses: actions/checkout@v3     # 소스 코드 복제 프로세스
      - uses: actions/setup-python@v4 # 런타임 환경 구성
        with:
          python-version: '3.11'
          
      - name: 모듈 실행
        run: python src/collector/main.py # 타겟 스크립트 실행
```

---

## ⚠️ 구문 작성 시 핵심 가이드 (Best Practices)

1. **엄격한 인덴트(Indent) 준수**
   - YAML은 띄어쓰기(공백 2칸 권장)로 데이터 계층을 구분합니다. 탭(Tab) 사용은 지양하며, 들여쓰기가 올바르지 않으면 로직이 인식되지 않습니다.
   
2. **동적 파일 경로 설정**
   - 로컬 환경이 아닌 가상 서버 환경이므로, 소스 코드 내에서 `os.path` 또는 `Pathlib`을 사용해 유동적인 파일 경로를 제어해야 합니다.

3. **환경 변수 보안 처리**
   - 코드 내부에 민감 정보를 하드코딩하지 마세요. 대신 `${{ secrets.VARIABLE_NAME }}` 문법을 사용하여 저장소 보안 설정에서 값을 주입받아야 합니다.

---

**정확한 YAML 작성을 통해 예외 상황 없는 견고한 자동화 시스템을 구축할 수 있습니다.** 🎊
